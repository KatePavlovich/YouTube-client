!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="dist/js/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var s=class{constructor(t){this.baseUrl="https://www.googleapis.com/youtube/v3",this.settings={apiKey:"AIzaSyDbUE0d_AAbItBkI2PhLQaNpSUVZ_8iKKQ",maxResults:"15",part:["snippet","statistics"]},this.searchRequest=t,this.items=[],this.itemsIdsSet=[],this.nextPageToken=null,this.data={}}getIds(){const t=[];this.items.forEach(e=>t.push(e.id.videoId)),this.itemsIdsSet=[...new Set(t)]}readSearchRequest(t){fetch(`${this.baseUrl}/search?key=${this.settings.apiKey}&part=${this.settings.part[0]}&maxResults=${this.settings.maxResults}&q=${this.searchRequest}&pageToken=CAAQAA`).then(t=>t.json()).then(t=>{this.data={...t},this.items=[...t.items],this.nextPageToken=t.nextPageToken,this.getIds(this.items)}).then(()=>{fetch(`${this.baseUrl}/videos?key=${this.settings.apiKey}&part=${this.settings.part.join(",")}&id=${this.itemsIdsSet.join(",")}`).then(t=>t.json()).then(e=>{t(e.items)})})}getMoreVideos(t){fetch(`${this.baseUrl}/search?key=${this.settings.apiKey}&part=${this.settings.part[0]}&maxResults=${this.settings.maxResults}&q=${this.nextPageToken}`).then(t=>t.json()).then(t=>{this.data={...t},this.items=[...t.items],this.nextPageToken=t.nextPageToken,this.getIds(this.items)}).then(()=>{fetch(`${this.baseUrl}/videos?key=${this.settings.apiKey}&part=${this.settings.part.join(",")}&id=${this.itemsIdsSet.join(",")}`).then(t=>t.json()).then(e=>{t(e.items)})})}};var n=class{constructor(t){this.apiLoader=new s(t),this.videos=[]}getVideosFromApiLoader(t){this.apiLoader.readSearchRequest((e=[])=>{e.forEach(t=>this.addProduct(t)),t()})}addProduct(t){this.videos.push(t)}getVideos(){return this.videos}getMoreVideosFromApiLoader(t){this.apiLoader.getMoreVideos((e=[])=>{e.forEach(t=>this.addProduct(t)),t()})}};var o=class{constructor(t){this.controller=new n(t),this.pageSize=null,this.videoItemWidth=320,this.borderWidth=0,this.screenWidth=document.documentElement.clientWidth,this.position=0,this.carousel=document.querySelector("#carousel"),this.drawCarouselContainer(),this.smth=null,this.marginWidth=0,this.pageNumber=1,this.videosArr=[],this.videoContainerList=document.createElement("div"),this.buttonsContainer=null,this.x0=null,this.i=0,this.locked=!1,this.ini=null,this.fin=null,this.NF=30,this.rID=null,this.anf=null,this.startX=0,this.currentVideoIndex=0,this.getPageSize(),this.carousel.addEventListener("click",t=>this.showExactPage(t)),this.carousel.addEventListener("mousedown",t=>this.lock(t),!1),this.carousel.addEventListener("touchstart",t=>this.lock(t),!1),this.carousel.addEventListener("mouseup",t=>this.move(t),!1),this.carousel.addEventListener("touchend",t=>this.move(t),!1),window.addEventListener("resize",()=>this.resize(),!1)}getCurrentVideoIndex(){this.currentVideoIndex=(this.pageNumber-1)*this.pageSize}getPageNumber(){this.pageNumber=Math.abs((this.currentVideoIndex+1)/this.pageSize)}onSuccess(){this.videosArr=this.controller.getVideos(),this.drawVideoItems(this.videosArr)}drawCarouselContainer(){this.carousel=document.createElement("div"),this.carousel.className="carousel",this.carousel.setAttribute("id","carousel"),document.body.appendChild(this.carousel),this.data=this.controller.getVideosFromApiLoader(this.onSuccess.bind(this))}drawVideoItems(t){const e=document.createElement("div");e.className="videoContainer-wrapper",e.setAttribute("id","videoContainer"),this.videoContainerList.setAttribute("id","videoContainerList"),this.videoContainerList.className="videoContainer__list",this.addVideosToList(t),e.appendChild(this.videoContainerList),this.carousel.appendChild(e),this.drawPageNavigation()}countBorderWidth(){this.borderWidth=parseInt((this.screenWidth-this.videoItemWidth*this.pageSize)/(2*this.pageSize),10)}addVideosToList(t){t.forEach(t=>{const e="https://www.youtube.com/",i=new Date(t.snippet.publishedAt),s=`${i.getFullYear()}-\n      ${i.getMonth()+1}-${i.getDate()}`,n=document.createElement("div");n.className="videoContainer",this.countBorderWidth(),n.style.borderLeft=`${this.borderWidth}px solid #7881ab`,n.style.borderRight=`${this.borderWidth}px solid #7881ab`,n.innerHTML=`<a class='videoContainer__link' href='${e}watch?v=${t.id}' target='blank'>\n                                        <h2 class='videoContainer__title'>${t.snippet.title}</h2>\n                                        \x3c!--<iframe src='${e}embed/${t.id}' width=${t.snippet.thumbnails.medium.width} height=${t.snippet.thumbnails.medium.height} frameborder='0' allow='autoplay;encrypted-media' allowfullscreen>\n                                        </iframe>--\x3e\n                                        <img\n                                        class='videoContainer__img'\n                                        src=${t.snippet.thumbnails.medium.url}\n                                        alt=${t.snippet.title}\n                                        width=${t.snippet.thumbnails.medium.width}\n                                        height=${t.snippet.thumbnails.medium.height}>\n                                        </a>\n                                        <div class="videoContainer__description">\n                                        <i class="fas fa-male description__item"></i>\n                                        <span>${t.snippet.channelTitle}</span>\n                                        <i class="far fa-calendar-alt description__item"></i>\n                                        <span>${s}</span>\n                                        <i class="far fa-eye description__item"></i>\n                                        <span>${t.statistics.viewCount}</span>\n                                        <p>${t.snippet.description.slice(0,150)}...</p>\n                                        </div>`,this.videoContainerList.appendChild(n)})}drawPageNavigation(){this.buttonsContainer&&this.buttonsContainer.remove(),this.buttonsContainer=document.createElement("div"),this.buttonsContainer.className="buttonsContainer-wrapper";let t=1;const e=Math.ceil(this.controller.getVideos().length/this.pageSize,10);for(;t<=e;){const i=document.createElement("div");i.className="button",i.setAttribute("data-id",t),i.setAttribute("title",t),i.innerHTML="",t===e&&i.setAttribute("data-position","last"),this.buttonsContainer.appendChild(i),t+=1}this.carousel.appendChild(this.buttonsContainer),this.drawActiveButton()}onMoreLoadSuccess(){this.videosArr=this.controller.getVideos(),this.drawPageNavigation(),this.drawActiveButton(),this.addVideosToList(this.videosArr)}drawActiveButton(){[...document.querySelectorAll(".button")].forEach(t=>{t.classList.remove("button--active")}),document.querySelectorAll(".button")[this.pageNumber-1].classList.add("button--active")}showExactPage(t){const e=+t.target.getAttribute("data-id"),i=t.target.getAttribute("data-position"),{target:s}=t;"button"===s.classList[0]&&(this.drawActiveButton(),i&&this.controller.getMoreVideosFromApiLoader(this.onMoreLoadSuccess.bind(this)),e<this.pageNumber?this.moveRight(this.pageNumber-e):this.moveLeft(e-this.pageNumber),this.pageNumber=e,this.drawActiveButton(),this.getCurrentVideoIndex())}moveLeft(t){this.position=this.position-(this.videoItemWidth+2*this.borderWidth)*this.pageSize*t,document.getElementById("videoContainerList").style.left=`${this.position}px`}moveRight(t){this.position=this.position+(this.videoItemWidth+2*this.borderWidth)*this.pageSize*t,document.getElementById("videoContainerList").style.left=`${this.position}px`}lock(t){const e=t.changedTouches?t.changedTouches[0]:t;this.startX=e.pageX;const{target:i}=t;"button"!==i.classList[0]&&(this.locked=!0,t.preventDefault())}move(t){const e=document.getElementById("videoContainerList");if(this.locked){const i=(t.changedTouches?t.changedTouches[0]:t).pageX,s=this.startX-i;Math.abs(s)>=150&&(s<0&&this.pageNumber>1&&(this.position+=(this.videoItemWidth+2*this.borderWidth)*this.pageSize,e.style.left=`${this.position}px`,this.pageNumber-=1),s>0&&(this.position-=(this.videoItemWidth+2*this.borderWidth)*this.pageSize,e.style.left=`${this.position}px`,this.pageNumber+=1),this.drawActiveButton(),this.getCurrentVideoIndex(),this.currentVideoIndex+this.pageSize>=this.videosArr.length&&this.controller.getMoreVideosFromApiLoader(this.onMoreLoadSuccess.bind(this))),this.locked=!1}}getPageSize(){this.screenWidth<768?this.pageSize=1:this.screenWidth>=768&&this.screenWidth<1310?this.pageSize=2:this.pageSize=4}resize(){this.getPageSize.bind(this.carousel),this.drawActiveButton(),this.addVideosToList(this.videosArr),this.drawPageNavigation()}};(new class{constructor(){this.searchRequest=null}drawInput(){this.inputContainer=document.createElement("div"),this.inputContainer.className="search",this.inputContainer.innerHTML='<i class="fas fa-search search__icon"></i><input class="search__input" id="inputId" placeholder="Please enter your query" />',document.body.appendChild(this.inputContainer)}start(){window.onload=(()=>{this.drawInput(),document.addEventListener("keydown",t=>{13===t.keyCode&&(document.querySelector("#carousel")&&document.querySelector("#carousel").remove(),this.searchRequest=document.getElementById("inputId").value,this.carousel=new o(this.searchRequest))})})}}).start()}]);